#summary Controles y configuración del mars-base
#labels Phase-Implementation,Phase-Support
= Introduction =

Esta es una lista de los controles y las posibles configuraciones que ofrece el mars-base, aunque hay que destacar que al ser actualizado casi cada día puede que esta lista no esté actualizada.


== Movimiento ==

Actualmente hay dos formas de desplazarse por el mapa, usando el ratón o usando el teclado.

Para desplazarse usando el ratón hay que pulsar y mantener pulsado el botón derecho del ratón. El movimiento del ratón se transforma en el movimiento del mapa.
Para moverse usando el teclado hay que pulsar las flechas.

La velocidad de desplazamiento depende de la altura a la que se esté situado.

La rotación de la cámara se hace usando las teclas _wasd_ o manteniendo el botón central del ratón.
También se puede rotar respecto al eje frontal de la cámara usando las teclas _q_ y _e_, pero este movimiento no funciona bien actualmente.

Para desplazarse arriba y abajo hay que mover la rueda del ratón arriba o abajo respectivamente.
Para subir o bajar la cámara rápidamente se debe pulsar la tecla _shift_ junto con el botón *derecho* del ratón.



== Lista de comandos ==

|| *Tecla* || *Contexto* || *Función* ||
|| Botón izquierdo || En el mapa || Selecciona un objeto (Por ahora selecciona el objeto situado en el centro de la pantalla) ||
|| Botón derecho || En el mapa || Desplazamiento de la cámara ||
|| Botón derecho + Shift || En el mapa || Subir / bajar la cámara rápidamente ||
|| Rueda del ratón || En el mapa || Subir / bajar la cámara ||
|| Botón central del ratón || En el mapa || Rotar la cámara ||
|| Flechas || En el mapa || Desplazamiento por el mapa ||
|| Flechas + Shift || En el mapa || Desplazamiento rápido por el mapa ||
|| WASDQE || En el mapa || Rotación de la cámara ||
|| C || En el mapa || Mostrar la cuadrícula (No funciona correctamente) ||
|| V || En el mapa || Oculta la cuadrícula ||
|| B || En el mapa || Muestra los vectores normales a las cuadrículas del terreno ||
|| N || En el mapa || Oculta los vectores normales a las cuadrículas del terreno ||
|| ESC || Siempre || Sale del juego ||

== Configuración ==

=== Introducción ===
Actualmente la mayor parte del juego no permite ser configurado ya que apenas hay funciones como juego en sí, pero si hay pequeños archivos de configuración para el desarrollo del juego. Aunque cabe destacar que lo más seguro es que estos archivos sean temporales y acaben siendo reemplazados o eliminados.

=== Carga de modelos (Temporal) ===
En la carpeta _models_ hay un archivo llamado `temporal_lista_objetos_a_cargar.txt` donde se puede especificar qué modelos cargar y dónde situarlos, entre otras cosas.
El formato del archivo de texto es muy simple, los comentarios se indican con una doble barra ('//') al inicio de la línea. El cuerpo del archivo está formado por una clave, un signo '=' y su valor, finalizado con un ';' opcional.

En este caso la clave empieza con la palabra `obj_` seguida por un número de identificación único para cada objeto (empezando por el objeto 1), un espacio en blanco y la propiedad del objeto.
La propiedad `file` indica la ruta del modelo 3ds a cargar, _x_, _y_ y _z_ indican las coordenadas del objeto (siendo (0,0,0) el punto situado delante de la cámara).
La propiedad sq define el tamaño del rectángulo de colisiones del objeto.

Cada objeto tiene un cuadrado de colisiones asignado, en teoría estos rectángulos definen el espacio que ocupa cada objeto y no pueden solaparse con el resto de objetos. Es algo así como el recuadro verde que sale en los juegos de estrategia cuando quieres crear un edificio.
El recuadro se usa no solo para las colisiones, también sirve para detectar si se ha seleccionado o no un objeto.

Está definido por 4 valores, uno para cada distancia al lado del rectángulo desde el centro del objeto. `r` hace referencia a la distancia del centro del objeto hasta el lado derecho (right) del objeto, `t` al superior (top), `l` al izquierdo (left) y `b` al inferior (bottom). Siendo la derecha el eje 'y' positivo y arriba el eje 'x' positivo.

=== Carga de mapas ===
Los mapas se cargan de un archivo de mapa precompilado (`.nmap`), pero si no se encuentra el archivo lo compila usando una serie de archivos de configuración.

Primero lee `marineris.txt` donde espera encontrar los siguientes datos exactamente como se indica a continuación (con los valores donde están los '< >'):
{{{
North	= <Coordenadas globales del Norte del mapa (No usado creo recordar)>
South	= <Coordenadas globales del Sur del mapa (No usado creo recordar)>
East	= <Coordenadas globales del Este del mapa (No usado creo recordar)>
West	= <Coordenadas globales del Oeste del mapa (No usado creo recordar)>
Scale	= <Tamaño de las casillas en km>
Lines	= <Filas de la imagen (height)>
Samples	= <Columnas de la imagen (width)>
zero_h	= <Altura considerada como cero>
min_h	= <Valor de la altura en el punto más bajo del mapa en metros>
max_h	= <Valor de la altura en el punto más alto del mapa en metros>
ini_x	= <Coordenadas iniciales de la cámara (Punto (0,0,0))>
ini_y	= <Coordenadas iniciales de la cámara (Punto (0,0,0))>
ini_z	= <Coordenadas iniciales de la cámara (Punto (0,0,0))>
}}}

Una vez tiene esos datos carga la imagen `marineris.pgm` en modo texto (no binario), y lo trata como la lista de alturas de cada casilla.

Durante el juego se muestra la imágen `marineris_minimap.jpg` como minimapa.